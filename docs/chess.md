# Описание классов и методов

## Board

Шахатная доска.

## Piece

Базовый класс для шахматных фигур.

### Атрибуты Piece

* **board** - объект класса [Board](#board), доска, которой принадлежит фигура;
* **color** - цвет фигуры;
* **former_squares** - список полей, на которых фигура находилась ранее
(не включает текущее пуле), может быть пуст, если фигура ещё не ходила;
* **moved** - истинен, если фигура совершала ходы после помещения на доску,
иначе ложен;
* **place_at** - ссылка на поле шахматной доски, на котором находится фигура;
если фигура находится вне доски - принимает значение **None**;
* **promoted_from** - - ссылка на другую фигуру (пешку), превращением из
которой была создана данная фигура.

### Конструктор Piece

Аргументы:

1. **board** - объект класса [Board](#board), доска, которой принадлежит фигура;
2. **color** - цвет фигуры;
3. **place** *(необязательный аргумент)* - поле шахматной доски, на которое
поставить фигуру после создания; значение по умолчанию - **None**;
4. **promoted_from** *(необязательный аргумент)* - ссылка на другую фигуру
(пешку), превращением из которой была создана данная фигура.

### is_bishop()

Возвращает истину, если фигура является слоном, иначе - ложь.

Этот метод может быть переопределён в подклассах, а в классе Piece всегда
возвращает ложь.

### is_black()

Возвращает истину, если фигура - чёрная, иначе - ложь.

### is_king()

Возвращает истину, если фигура является королём, иначе - ложь.

Этот метод может быть переопределён в подклассах, а в классе Piece всегда
возвращает ложь.

### is_knight()

Возвращает истину, если фигура является конём, иначе - ложь.

Этот метод может быть переопределён в подклассах, а в классе Piece всегда
возвращает ложь.

### is_offboard()

Возвращает истину, если фигура находится вне доски, иначе - ложь.

Изначально фигура находится вне доски (если только при её создании не был
задан аргумент **place**), а ставится на доску вызовом метода
[put_at()](#put_atplace). Фигура может быть убрана с доски вызовом метода
[remove()](#remove). Кроме того, вызов метода [move_back()](#move_back) может
вернуть убранную с доски фигуру обратно на доску.

### is_onboard()

Возвращает истину, если фигура находится на доске, иначе - ложь.

Изначально фигура находится вне доски (если только при её создании не был
задан аргумент **place**), а ставится на доску вызовом метода
[put_at()](#put_atplace). Фигура может быть убрана с доски вызовом метода
[remove()](#remove). Кроме того, вызов метода [move_back()](#move_back) может
вернуть убранную с доски фигуру обратно на доску.

### is_pawn()

Возвращает истину, если фигура является пешкой, иначе - ложь.

Этот метод может быть переопределён в подклассах, а в классе Piece всегда
возвращает ложь.

### is_queen()

Возвращает истину, если фигура является ферзём, иначе - ложь.

Этот метод может быть переопределён в подклассах, а в классе Piece всегда
возвращает ложь.

### is_rook()

Возвращает истину, если фигура является ладьёй, иначе - ложь.

Этот метод может быть переопределён в подклассах, а в классе Piece всегда
возвращает ложь.

### is_white()

Возвращает истину, если фигура - белая, иначе - ложь.

### move_back()

Передвигает фигуру обратно на предыдущее поле.

Если фигура ещё не ходила - выбрасывает исключение.

Удаляет последнее значение из списка **former_squares**.

Обновляет атрибут **place_at**.

Если фигура стояла на доске - обновляет атрибут **piece** того [поля](#square),
на котом стояла фигура; а также обновляет атрибут **piece** поля, на которое
она вернулась.

### move_to(new_place)

Передвигает фигуру на другое поле.

Аргументы:

**new_place** - поле, на которое передвинуть фигуру. Может указывать на любое
поле доски. **Правильность и допустимость хода в этом методе не проверяется!**

Описание:

**new_place** может быть как ссылкой на объект класса [Square](#square), так и
строкой с координатами поля (например "e5" или "D7").

Если фигура находится вне доски - выбрасывается исключение. Также исключение
выбрасывается, если поле назначения совпадает с текущим полем, на котором
стоит фигура.

Если на поле **new_place** стоит другая фигура - она убирается с доски (путём
вызова метода [remove()](#remove)).

Обновляет атрибут **place_at**.

Обновляет атрибуты **piece** того [поля](#square), на котом стояла фигура, и
того, на которое она переместилась.

Добавляет поле на котором стояла фигура в список **former_squares**.

### put_at(place)

Ставит фигуру на доску.

Аргументы:

**place** - поле, на которое поставить фигуру.

Описание:

**place** может быть как ссылкой на объект класса [Square](#square), так и
строкой с координатами поля (например "g6" или "C3").

Если фигура уже находится на доске - выбрасывается исключение. Также исключение
выбрасывается, если на поле **place** стоит другая фигура.

Обнуляет атрибут **former_squares**.

Обновляет атрибут **place_at**.

Обновляет атрибут **piece** того [поля](#square), на которое ставят фигуру.

### remove()

Убирает фигуру с доски.

Если фигура не на доске - выбрасывает исключение.

Обновляет список полей **former_squares**, добавляя в него поле, на котором
стояла фигура.

Значение атрибута **place_at** меняет на **None**.

Значение атрибута **piece** того [квадрата](#square), на котором стояла
фигура, меняет на **None**.

## Square

Поле шахматной доски.

Поле может находиться за пределами шахматной доски, если при его создании были
даны координаты **file_index** и/или **rank_index** за пределами диапазона 0-7.

"Виртуальные" поля за краем доски нужны для упрощения генерации ходов
шахматных фигур. У таких полей есть ряд особенностей: отсутствие буквы и
номера, невозможность поставить на него фигуру, подробнее смотри ниже.

### Атрибуты Square

* **all_squares** - ссылка на [все поля доски](#squares), необходима для
реализации свойств **down**, **left**, **right**, **up**.
* **color** - цвет поля, вычисляется, исходя из координат поля.
* **down** - ссылка на квадрат, находящийся под текущим.
* **file** - буква поля (a-h). Если поле находится за левым или правым краем
доски, значение этого свойства должно быть **None**.
* **file_index** - индекс столбца, который был указан при создании поля.
* **left** - ссылка на квадрат, находящийся слева от текущего.
* **piece** - ссылка на стоящую на поле фигуру. Если поле пустое - значение
этого свойства должно быть **None**. При попытке поставить фигуру на поле,
находящееся за краем доски должно выбрасываться исключение.
* **rank** - номер поля (1-8). Если поле находится за верхним или нижним краем
доски, значение этого свойства должно быть **None**.
* **rank_index** - индекс строки, который был указан при создании поля.
* **right** - ссылка на квадрат, находящийся справа от текущего.
* **up** - ссылка на квадрат, находящийся над текущим.

### Конструктор Square

Аргументы:

1. **all_squares** - объект класса [Squares](#squares), все поля доски;
2. **file_index** - индекс столбца в котором находится поле;
3. **rank_index** - индекс строки в которой находится поле.

## Squares

Все поля шахматной доски.

Этот класс реализует интерфейс последовательности и нужен для упрощения
доступа к полям шахматной доски.
